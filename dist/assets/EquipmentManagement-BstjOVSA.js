import{v as E,e as C,f as q,r as b,j as e,E as g}from"./index-B-QOVXil.js";import{k as P}from"./App-gCA-TVeX.js";const U=()=>{const y=E(),{t:a,isJapanese:d}=C(),{showToast:n}=q(),{addEquipment:j,updateEquipment:f,deleteEquipment:N}=P(),[v,m]=b.useState(!1),[s,i]=b.useState(null),o=(t=null)=>{i(t||{status:g.Available,isReservable:!0,rate:0,imageUrl:""}),m(!0)},x=()=>{m(!1),i(null)},w=async t=>{if(t.preventDefault(),!s)return;let r;"id"in s&&s.id?r=await f(s):r=await j(s),r.success===!1?n(`${a("saveFailed")}: ${r.error.message}`,"error"):(n(a("equipmentSaved"),"success"),x())},k=async t=>{if(window.confirm(a("deleteEquipmentConfirm"))){const r=await N(t);r.success===!1?n(`${a("deleteFailed")}: ${r.error.message}`,"error"):n(a("equipmentDeleted"),"success")}},l=t=>{const{name:r,value:u,type:h}=t.target;let c=u;h==="checkbox"?c=t.target.checked:h==="number"&&(c=parseFloat(u)||0),i(p=>p?{...p,[r]:c}:null)};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-3xl font-bold text-ever-black",children:a("equipmentMasterManagement")}),e.jsx("button",{onClick:()=>o(),className:"bg-ever-blue hover:bg-ever-blue-dark text-white font-bold py-2 px-4 rounded-lg",children:a("addNewEquipment")})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("equipmentName")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("category")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("rate")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("status")}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("actions")})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:y.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d?t.nameJP:t.nameEN}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d?t.categoryJP:t.categoryEN}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.rate," ",d?t.rateUnitJP:t.rateUnitEN]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.status}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{onClick:()=>o(t),className:"text-indigo-600 hover:text-indigo-900 mr-4",children:a("edit")}),e.jsx("button",{onClick:()=>k(t.id),className:"text-red-600 hover:text-red-900",children:a("delete")})]})]},t.id))})]})}),v&&s&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-2xl font-bold mb-6",children:s.id?a("editEquipment"):a("addNewEquipment")}),e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:a("nameJP")}),e.jsx("input",{type:"text",name:"nameJP",value:s.nameJP||"",onChange:l,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:a("nameEN")}),e.jsx("input",{type:"text",name:"nameEN",value:s.nameEN||"",onChange:l,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:a("categoryJP")}),e.jsx("input",{type:"text",name:"categoryJP",value:s.categoryJP||"",onChange:l,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:a("categoryEN")}),e.jsx("input",{type:"text",name:"categoryEN",value:s.categoryEN||"",onChange:l,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:a("rate")}),e.jsx("input",{type:"number",name:"rate",value:s.rate||0,onChange:l,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:a("rateUnitJP")}),e.jsx("input",{type:"text",name:"rateUnitJP",value:s.rateUnitJP||"",onChange:l,placeholder:"例: ¥/時間",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:a("rateUnitEN")}),e.jsx("input",{type:"text",name:"rateUnitEN",value:s.rateUnitEN||"",onChange:l,placeholder:"e.g., ¥/hour",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:a("status")}),e.jsx("select",{name:"status",value:s.status||"",onChange:l,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",children:Object.values(g).map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:a("imageUrl")}),e.jsx("input",{type:"text",name:"imageUrl",value:s.imageUrl||"",onChange:l,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:!0})]}),e.jsxs("div",{className:"col-span-2 flex items-center",children:[e.jsx("input",{type:"checkbox",id:"isReservable",name:"isReservable",checked:s.isReservable||!1,onChange:l,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"isReservable",className:"ml-2 block text-sm text-gray-900",children:a("reservable")})]})]}),e.jsxs("div",{className:"mt-4 border-t pt-4",children:[e.jsx("h4",{className:"text-md font-medium text-gray-800 mb-2",children:a("maintenanceSettings")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:a("pmInterval")}),e.jsx("input",{type:"number",name:"pmIntervalDays",value:s.pmIntervalDays||"",onChange:l,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:a("lastPmDate")}),e.jsx("input",{type:"date",name:"lastPmDate",value:s.lastPmDate||"",onChange:l,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:a("calibrationInterval")}),e.jsx("input",{type:"number",name:"calibrationIntervalDays",value:s.calibrationIntervalDays||"",onChange:l,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:a("lastCalibrationDate")}),e.jsx("input",{type:"date",name:"lastCalibrationDate",value:s.lastCalibrationDate||"",onChange:l,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"})]})]})]}),e.jsxs("div",{className:"mt-8 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:x,className:"bg-gray-200 text-gray-700 font-bold py-2 px-4 rounded-lg",children:a("cancel")}),e.jsx("button",{type:"submit",className:"bg-ever-blue text-white font-bold py-2 px-4 rounded-lg",children:a("save")})]})]})]})})]})};export{U as default};
