import{S as p,k as b,e as j,r as v,s as g,j as e,V as n}from"./index-B-QOVXil.js";const f=()=>{const o=p(),{projects:i,tasks:c}=b(),{t:l}=j(),x=v.useMemo(()=>i.map(s=>{const t=c.filter(a=>a.projectId===s.id),r=t.filter(a=>a.status===g.Done),d=t.length>0?Math.round(r.length/t.length*100):0,m=t.filter(a=>a.dueDate&&new Date(a.dueDate)<new Date&&a.status!==g.Done),u=o.filter(a=>a.projectId===s.id).reduce((a,h)=>a+h.durationMinutes/60,0);return{...s,progressPercent:d,totalTasks:t.length,completedTasks:r.length,overdueTasks:m.length,totalUsageHours:Math.round(u*10)/10}}),[i,c,o]);return e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:l("projectProgressDashboard")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[x.map(s=>e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 flex flex-col",children:[e.jsx("h3",{className:"text-xl font-bold mb-2 text-ever-purple",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-4 flex-grow",children:s.description}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:l("progress")}),e.jsxs("span",{className:"font-bold",children:[s.progressPercent,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"bg-ever-blue h-3 rounded-full transition-all",style:{width:`${s.progressPercent}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4 text-center",children:[e.jsxs("div",{className:"bg-gray-50 p-2 rounded",children:[e.jsx("div",{className:"text-xs text-gray-600",children:l("totalTasks")}),e.jsx("div",{className:"text-lg font-bold",children:s.totalTasks})]}),e.jsxs("div",{className:"bg-green-50 p-2 rounded",children:[e.jsx("div",{className:"text-xs text-green-600",children:l("taskStatusDone")}),e.jsx("div",{className:"text-lg font-bold text-green-700",children:s.completedTasks})]}),e.jsxs("div",{className:"bg-red-50 p-2 rounded",children:[e.jsx("div",{className:"text-xs text-red-600",children:l("projectTaskOverdue")}),e.jsx("div",{className:"text-lg font-bold text-red-700",children:s.overdueTasks})]})]}),s.milestones.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-sm font-medium mb-2",children:l("milestones")}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:s.milestones.map(t=>{const r=t.status===n.Pending&&new Date(t.dueDate)<new Date,d=t.status===n.Completed?"bg-green-100 text-green-800":t.status===n.InProgress?"bg-yellow-100 text-yellow-800":r?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800";return e.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${d}`,title:`${t.name} (${new Date(t.dueDate).toLocaleDateString()})`,children:t.name},t.id)})})]}),e.jsxs("div",{className:"text-sm text-gray-600 mt-auto pt-4 border-t",children:[l("totalEquipmentUsage"),":",e.jsxs("span",{className:"font-bold ml-2",children:[s.totalUsageHours,"h"]})]})]},s.id)),x.length===0&&e.jsx("p",{className:"text-gray-500 col-span-full text-center py-8",children:l("noProjectsToDisplay")})]})]})};export{f as default};
