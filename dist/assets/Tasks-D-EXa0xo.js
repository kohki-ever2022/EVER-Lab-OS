import{u as g,e as p,k as j,d as v,i as x,r as m,s as i,j as e,q as l}from"./index-B-QOVXil.js";import{b,c as f,d as w,e as y}from"./App-gCA-TVeX.js";const N=({priority:s})=>({[l.Urgent]:e.jsx(y,{className:"w-4 h-4 text-red-500"}),[l.High]:e.jsx(w,{className:"w-4 h-4 text-orange-500"}),[l.Medium]:e.jsx(f,{className:"w-4 h-4 text-yellow-500"}),[l.Low]:e.jsx(b,{className:"w-4 h-4 text-blue-500"})})[s],k=({task:s,users:a})=>{const{openModal:o}=x(),c=a.filter(t=>s.assigneeIds.includes(t.id));return e.jsxs("div",{onClick:()=>o({type:"editTask",props:{task:s}}),className:"bg-white p-3 rounded-md shadow-sm border hover:shadow-md cursor-pointer",children:[e.jsx("p",{className:"font-semibold text-sm mb-2",children:s.title}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{priority:s.priority}),s.dueDate&&e.jsx("span",{className:"text-xs text-gray-500",children:new Date(s.dueDate).toLocaleDateString()})]}),e.jsx("div",{className:"flex -space-x-2",children:c.map(t=>e.jsx("div",{title:t.name,className:"relative inline-block",children:t.imageUrl?e.jsx("img",{className:"h-6 w-6 rounded-full ring-2 ring-white",src:t.imageUrl,alt:t.name}):e.jsx("div",{className:"h-6 w-6 rounded-full ring-2 ring-white bg-ever-purple-light flex items-center justify-center text-ever-purple-dark font-bold text-xs",children:t.name.charAt(0)})},t.id))})]})]})},D=()=>{const{currentUser:s}=g(),{t:a}=p(),{tasks:o}=j(),c=v(),{openModal:t}=x(),d=m.useMemo(()=>s?o.filter(r=>r.assigneeIds.includes(s.id)||r.createdByUserId===s.id):[],[o,s]),h=[{status:i.ToDo,title:a("taskStatusToDo")},{status:i.InProgress,title:a("taskStatusInProgress")},{status:i.InReview,title:a("taskStatusInReview")},{status:i.Done,title:a("taskStatusDone")}],u=m.useMemo(()=>{const r={[i.ToDo]:[],[i.InProgress]:[],[i.InReview]:[],[i.Done]:[]};return d.forEach(n=>{r[n.status].push(n)}),r},[d]);return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-3xl font-bold text-ever-black",children:a("taskManagement")}),e.jsx("button",{onClick:()=>t({type:"editTask",props:{task:null}}),className:"bg-ever-blue hover:bg-ever-blue-dark text-white font-bold py-2 px-4 rounded-lg",children:a("newTask")})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:h.map(r=>e.jsxs("div",{className:"bg-gray-100 rounded-lg p-3",children:[e.jsxs("h3",{className:"font-semibold mb-3 px-1",children:[r.title," (",u[r.status].length,")"]}),e.jsx("div",{className:"space-y-3 h-[calc(100vh-20rem)] overflow-y-auto pr-1",children:u[r.status].map(n=>e.jsx(k,{task:n,users:c},n.id))})]},r.status))})]})};export{D as default};
