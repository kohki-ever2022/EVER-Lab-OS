import{u as w,e as f,I as y,o as k,v as A,i as D,J as x,p as C,j as e}from"./index-B-QOVXil.js";import{A as v,C as E,B as T,P as S,S as I}from"./App-gCA-TVeX.js";import{u as R}from"./useEquipmentFavorites-nLe_T5O1.js";const c=({title:l,icon:t,children:a,onViewAll:r,viewAllText:o})=>e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-ever-blue-light rounded-full mr-3",children:t}),e.jsx("h3",{className:"text-lg font-bold text-ever-black",children:l})]}),r&&e.jsx("button",{onClick:r,className:"text-sm font-semibold text-ever-blue hover:text-ever-blue-dark",children:o})]}),e.jsx("div",{className:"flex-grow",children:a})]}),M=()=>{const{currentUser:l}=w(),{t,isJapanese:a}=f(),r=y(),o=k(),d=A(),{getFavorites:j}=R(),{openModal:b}=D(),u=x.useMemo(()=>{const s=new Date;return o.filter(n=>n.userId===(l==null?void 0:l.id)&&n.status===C.AwaitingCheckIn&&new Date(n.startTime)>s).sort((n,m)=>new Date(n.startTime).getTime()-new Date(m.startTime).getTime()).slice(0,3)},[o,l]),h=x.useMemo(()=>r.sort((s,n)=>new Date(n.startDate).getTime()-new Date(s.startDate).getTime()).slice(0,3),[r]),p=l?j(l.id):[],g=x.useMemo(()=>d.filter(s=>p.includes(s.id)).slice(0,5),[d,p]),N=s=>{b({type:"bookEquipment",props:{equipment:s}})},i=s=>{window.location.hash=s};return e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold mb-6",children:[t("welcome"),l==null?void 0:l.name]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(c,{title:t("upcomingReservations"),icon:e.jsx(E,{className:"h-6 w-6 text-ever-blue"}),onViewAll:()=>i("reservations"),viewAllText:t("viewAll"),children:u.length>0?e.jsx("ul",{className:"space-y-3",children:u.map(s=>{const n=d.find(m=>m.id===s.equipmentId);return e.jsxs("li",{className:"p-3 bg-gray-50 rounded-md flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:a?n==null?void 0:n.nameJP:n==null?void 0:n.nameEN}),e.jsx("p",{className:"text-sm text-gray-600",children:new Date(s.startTime).toLocaleString(a?"ja-JP":"en-US",{dateStyle:"short",timeStyle:"short"})})]}),e.jsx(v,{})]},s.id)})}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{children:t("noUpcomingReservations")})})})}),e.jsx("div",{children:e.jsx(c,{title:t("quickActions"),icon:e.jsx(T,{className:"h-6 w-6 text-ever-blue"}),children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>i("equipment"),className:"w-full text-left p-3 bg-ever-blue-light hover:bg-ever-blue-light/80 rounded-md font-semibold text-ever-blue-dark transition-colors",children:t("bookEquipment")}),e.jsx("button",{onClick:()=>i("projects"),className:"w-full text-left p-3 bg-ever-purple-light hover:bg-ever-purple-light/80 rounded-md font-semibold text-ever-purple-dark transition-colors",children:t("viewProjects")}),e.jsx("button",{onClick:()=>i("consumablesStore"),className:"w-full text-left p-3 bg-green-100 hover:bg-green-200/80 rounded-md font-semibold text-green-800 transition-colors",children:t("consumablesStore")})]})})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx(c,{title:t("announcements"),icon:e.jsx(S,{className:"h-6 w-6 text-ever-blue"}),onViewAll:()=>i("announcements"),viewAllText:t("viewAll"),children:h.length>0?e.jsx("ul",{className:"space-y-3",children:h.map(s=>e.jsxs("li",{className:"p-3 bg-gray-50 rounded-md",children:[e.jsx("p",{className:"font-semibold text-gray-800",children:a?s.titleJP:s.titleEN}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(s.startDate).toLocaleDateString()})]},s.id))}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{children:t("noAnnouncements")})})})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsx(c,{title:t("favoriteEquipment"),icon:e.jsx(I,{className:"h-6 w-6 text-ever-blue"}),onViewAll:()=>i("equipment"),viewAllText:t("viewAll"),children:g.length>0?e.jsx("ul",{className:"space-y-3",children:g.map(s=>e.jsxs("li",{className:"p-3 bg-gray-50 rounded-md flex justify-between items-center hover:bg-gray-100 cursor-pointer",onClick:()=>N(s),children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:a?s.nameJP:s.nameEN}),e.jsx("p",{className:"text-sm text-gray-600",children:s.status})]}),e.jsx(v,{className:"w-5 h-5 text-gray-400"})]},s.id))}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{children:t("noFavoriteEquipment")})})})})]})]})};export{M as default};
