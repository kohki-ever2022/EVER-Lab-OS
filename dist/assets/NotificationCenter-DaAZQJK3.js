import{u as f,e as g,g as p,j as t,n as o}from"./index-B-QOVXil.js";import{i as N}from"./App-gCA-TVeX.js";const v=({type:r})=>{const s={[o.EquipmentMalfunction]:{icon:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z",color:"text-red-500"},[o.LowStock]:{icon:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4z",color:"text-orange-500"},[o.CertificateExpiring]:{icon:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z",color:"text-yellow-500"},[o.NewQuotationRequest]:{icon:"M8.25 18.75a.75.75 0 01.75.75v.008c0 .414.336.75.75.75h4.5a.75.75 0 010 1.5h-4.5a2.25 2.25 0 01-2.25-2.25v-.008a.75.75 0 01.75-.75z M10.5 3.75a2.25 2.25 0 00-2.25 2.25v1.5a.75.75 0 001.5 0v-1.5a.75.75 0 01.75-.75h3a.75.75 0 01.75.75v1.5a.75.75 0 001.5 0v-1.5a2.25 2.25 0 00-2.25-2.25h-3z",color:"text-blue-500"},[o.ReservationCancelled]:{icon:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636",color:"text-purple-500"},[o.General]:{icon:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z",color:"text-gray-500"}},{icon:a,color:i}=s[r]||s.GENERAL;return t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-6 w-6 ${i}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:a})})},b=({onClose:r})=>{const{currentUser:s}=f(),{t:a,isJapanese:i}=g(),{notifications:n}=p(),{markNotificationAsRead:c,markAllNotificationsAsRead:d}=N(),l=n.filter(e=>e.recipientUserId===(s==null?void 0:s.id)).sort((e,u)=>u.createdAt.getTime()-e.createdAt.getTime()),x=l.filter(e=>!e.read).length,m=e=>{c(e.id),e.actionUrl&&(window.location.hash=e.actionUrl),r()},h=e=>{e.stopPropagation(),d()};return t.jsxs("div",{className:"absolute top-16 right-4 w-full max-w-sm bg-white rounded-lg shadow-2xl border border-gray-200 z-30 flex flex-col max-h-[80vh]",children:[t.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[t.jsx("h3",{className:"font-bold text-lg",children:a("notifications")}),x>0&&t.jsx("button",{onClick:h,className:"text-sm text-blue-600 hover:underline",children:a("markAllAsRead")})]}),t.jsx("div",{className:"overflow-y-auto",children:l.length>0?l.map(e=>t.jsx("div",{onClick:()=>m(e),className:`p-4 border-b border-gray-100 cursor-pointer hover:bg-gray-50 ${e.read?"":"bg-blue-50"}`,children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"flex-shrink-0 mt-1",children:t.jsx(v,{type:e.type})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:i?e.titleJP:e.titleEN}),t.jsx("p",{className:"text-sm text-gray-600",children:i?e.messageJP:e.messageEN}),t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:new Date(e.createdAt).toLocaleString()})]}),!e.read&&t.jsx("div",{className:"w-2.5 h-2.5 bg-blue-500 rounded-full mt-2 self-center"})]})},e.id)):t.jsx("div",{className:"p-8 text-center text-gray-500",children:t.jsx("p",{children:a("noNewNotifications")})})})]})};export{b as default};
