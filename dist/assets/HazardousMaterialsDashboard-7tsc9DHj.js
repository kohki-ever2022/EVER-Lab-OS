import{e as b,P as j,h as N,m as w,i as v,j as t}from"./index-B-QOVXil.js";const C=()=>{const{t:n,isJapanese:i}=b(),p=j(),{companies:m}=N(),{sds:u}=w(),{openModal:h}=v(),g=e=>{window.location.hash=e},l=p.filter(e=>e.isHazardous),r=e=>!e.isHazardous||!e.designatedQuantity||!e.packageSize||e.designatedQuantity===0?0:e.stock*(e.packageSize||0)/e.designatedQuantity,o=l.reduce((e,a)=>e+r(a),0),d=o>=1,c=l.reduce((e,a)=>{const s=a.ownerCompanyId||"facility";e[s]||(e[s]={items:[],totalMultiple:0});const x=r(a);return e[s].items.push({...a,multiple:x}),e[s].totalMultiple+=x,e},{}),y=e=>{if(e==="facility")return n("facility");const a=m.find(s=>s.id===e);return a?i?a.nameJP:a.nameEN:"Unknown"},f=e=>{if(!e){alert(n("noSdsAssociated"));return}const a=u.find(s=>s.id===e);a?h({type:"sdsDetails",props:{sds:a}}):alert(n("sdsNotFound"))};return t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h2",{className:"text-3xl font-bold text-ever-black",children:n("hazardousMaterialsDashboard")}),t.jsx("button",{onClick:()=>g("internalConsumablesManagement"),className:"bg-ever-blue text-white font-bold py-2 px-4 rounded-lg hover:bg-ever-blue-dark",children:n("goToInventory")})]}),t.jsxs("div",{className:`p-6 rounded-lg mb-6 ${d?"bg-red-100 border-red-500":"bg-green-100 border-green-500"} border-l-4`,children:[t.jsx("h3",{className:"text-lg font-bold",children:n("facilityWideMultiple")}),t.jsx("p",{className:"text-4xl font-mono font-bold mt-2",children:o.toFixed(3)}),t.jsx("p",{className:"text-sm mt-1",children:n("fireServiceActStandard")}),d&&t.jsx("p",{className:"font-bold text-red-700 mt-2",children:n("fireServiceActWarning")})]}),t.jsx("div",{className:"space-y-6",children:Object.keys(c).map(e=>{const a=c[e];return t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[t.jsxs("h3",{className:"text-xl font-semibold mb-4",children:[y(e)," - ",n("totalMultiple"),": ",a.totalMultiple.toFixed(3)]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:n("substance")}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:n("category")}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:n("stock")}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:n("multiple")}),t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:n("actions")})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.items.map(s=>t.jsxs("tr",{children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i?s.nameJP:s.nameEN}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.hazardousCategory}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.stock*(s.packageSize||0)," ",s.packageUnit]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-mono",children:s.multiple.toFixed(3)}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:t.jsx("button",{onClick:()=>f(s.sdsId),className:"text-indigo-600 hover:text-indigo-900",children:n("sdsDetails")})})]},s.id))})]})})]},e)})})]})};export{C as default};
